@model SimpleCRM.Models.User

@{
    ViewData["Title"] = "Register";
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register - SimpleCRM</title>
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
</head>
<body class="bg-gradient-to-br from-green-500 to-blue-600 min-h-screen flex items-center justify-center">
    <div class="max-w-md w-full bg-white rounded-xl shadow-2xl p-8">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800">Create Account</h1>
            <p class="text-gray-600 mt-2">Join SimpleCRM today</p>
        </div>

        <form asp-action="Register" method="post" class="space-y-6">
            @if (!string.IsNullOrEmpty(ViewBag.Success))
            {
                <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
                    @ViewBag.Success
                </div>
            }
            
            @if (!string.IsNullOrEmpty(ViewBag.Error))
            {
                <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
                    @ViewBag.Error
                </div>
            }

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Username</label>
                <input asp-for="Username" id="username"
                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent" 
                       placeholder="At least 8 characters with a number" />
                <span asp-validation-for="Username" class="text-red-500 text-sm"></span>
                <div id="username-feedback" class="text-xs mt-1">
                    <div id="username-length" class="text-gray-500">
                        <span id="length-icon">❌</span> At least 8 characters
                    </div>
                    <div id="username-number" class="text-gray-500">
                        <span id="number-icon">❌</span> Contains at least one number
                    </div>
                    <div id="username-format" class="text-gray-500">
                        <span id="format-icon">❌</span> Letters and numbers only
                    </div>
                </div>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                <input asp-for="Email" type="email"
                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent" />
                <span asp-validation-for="Email" class="text-red-500 text-sm"></span>
            </div>

            <!-- Agent Information Section -->
            <div class="bg-gray-50 p-4 rounded-lg space-y-4">
                <h3 class="text-sm font-semibold text-gray-700">Agent Information</h3>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">First Name *</label>
                        <input asp-for="FirstName" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent" 
                               required />
                        <span asp-validation-for="FirstName" class="text-red-500 text-sm"></span>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Last Name *</label>
                        <input asp-for="LastName" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent" 
                               required />
                        <span asp-validation-for="LastName" class="text-red-500 text-sm"></span>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Phone</label>
                    <input asp-for="Phone" type="tel"
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent" 
                           placeholder="(555) 123-4567" />
                    <span asp-validation-for="Phone" class="text-red-500 text-sm"></span>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Department</label>
                        <select asp-for="Department" 
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent">
                            <option value="">Select Department</option>
                            <option value="Sales">Sales</option>
                            <option value="Marketing">Marketing</option>
                            <option value="Support">Support</option>
                            <option value="Engineering">Engineering</option>
                            <option value="HR">Human Resources</option>
                            <option value="Finance">Finance</option>
                            <option value="Operations">Operations</option>
                        </select>
                        <span asp-validation-for="Department" class="text-red-500 text-sm"></span>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Position</label>
                        <input asp-for="Position" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent" 
                               placeholder="e.g. Sales Representative" />
                        <span asp-validation-for="Position" class="text-red-500 text-sm"></span>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Hire Date</label>
                    <input asp-for="HireDate" type="date"
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent" />
                    <span asp-validation-for="HireDate" class="text-red-500 text-sm"></span>
                </div>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                <input asp-for="Password" type="password"
                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent" />
                <span asp-validation-for="Password" class="text-red-500 text-sm"></span>
                <p class="text-xs text-gray-500 mt-1">Must be at least 8 characters with uppercase, lowercase, number, and special character</p>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Confirm Password</label>
                <input name="confirmPassword" type="password"
                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent" />
            </div>
            
            <button type="submit" 
                    class="w-full bg-gradient-to-r from-green-500 to-blue-600 text-white py-2 px-4 rounded-lg hover:from-green-600 hover:to-blue-700 transition duration-200 font-medium">
                Create Account
            </button>
        </form>

        <div class="mt-6 text-center">
            <p class="text-sm text-gray-600">
                Already have an account? 
                <a asp-controller="Account" asp-action="Login" class="text-green-600 hover:underline">Sign in here</a>
            </p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const usernameInput = document.getElementById('username');
            const lengthCheck = document.getElementById('username-length');
            const numberCheck = document.getElementById('username-number');
            const formatCheck = document.getElementById('username-format');
            const lengthIcon = document.getElementById('length-icon');
            const numberIcon = document.getElementById('number-icon');
            const formatIcon = document.getElementById('format-icon');

            usernameInput.addEventListener('input', function() {
                const username = this.value;
                
                // Check length (at least 8 characters)
                if (username.length >= 8) {
                    lengthCheck.className = 'text-green-600';
                    lengthIcon.textContent = '✅';
                } else {
                    lengthCheck.className = 'text-red-500';
                    lengthIcon.textContent = '❌';
                }
                
                // Check for at least one number
                if (/\d/.test(username)) {
                    numberCheck.className = 'text-green-600';
                    numberIcon.textContent = '✅';
                } else {
                    numberCheck.className = 'text-red-500';
                    numberIcon.textContent = '❌';
                }
                
                // Check format (letters and numbers only)
                if (/^[a-zA-Z0-9]*$/.test(username)) {
                    formatCheck.className = 'text-green-600';
                    formatIcon.textContent = '✅';
                } else {
                    formatCheck.className = 'text-red-500';
                    formatIcon.textContent = '❌';
                }
            });
        });
    </script>
</body>
</html>
